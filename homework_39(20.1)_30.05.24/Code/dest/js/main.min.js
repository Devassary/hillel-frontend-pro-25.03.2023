"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var r;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=Array(e);r<e;r++)o[r]=t[r];return o}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,a,n,s,i=[],l=!0,c=!1;try{if(n=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(o=n.call(r)).done)&&(i.push(o.value),i.length!==e);l=!0);}catch(t){c=!0,a=t}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function createEl(t){var e=t.type,r=t.content,t=t.attributes,o=document.createElement(void 0===e?"div":e);return r&&(o.textContent=r),t&&Object.entries(t).forEach(function(t){var t=_slicedToArray(t,2),e=t[0],t=t[1];if("style"!==e&&"object"!==_typeof(t))return o.setAttribute(e,t);Object.entries(t).forEach(function(t){var t=_slicedToArray(t,2),e=t[0],t=t[1];o.style[e]=t})}),o}function Task(t){var e=t.title,r=t.description,t=t.state,t=void 0!==t&&t;this.title=e,this.description=r,this.state=t}function ToDoList(t){this.tasks=[],Array.isArray(t)&&t.every(function(t){return t instanceof Task})&&(this.tasks=t)}function prepareArrFromLocalStorage(t){return localStorage.key(t)?JSON.parse(localStorage.getItem(t)).tasks.map(function(t){return new Task(t)}):[]}ToDoList.prototype.addTask=function(t){t instanceof Task&&this.tasks.push(t)},ToDoList.prototype.deleteTask=function(t){this.tasks.splice(t,1)},ToDoList.prototype.printAtHtml=function(t){for(var t=document.querySelector(t),e=(t.querySelector("ol")&&t.querySelector("ol").remove(),createEl({type:"ol",content:"",attributes:{class:"list-group list-group-numbered"}})),r=document.createDocumentFragment(),o=0;o<this.tasks.length;o++){var a=createEl({type:"li",content:"",attributes:{class:"list-group-item d-flex justify-content-between align-items-center"}}),n=createEl({type:"input",content:"",attributes:{type:"checkbox",class:"done-checkbox col-md-auto"}}),s=createEl({type:"div",content:this.tasks[o].title,attributes:{class:"task-text col-6"}}),i=(s.dataset.bsToggle="modal",s.dataset.bsTarget="#exampleModal",createEl({type:"button",content:"Delete",attributes:{class:"btn btn-outline-secondary col-md-auto"}}));"true"===this.tasks[o].state?(n.checked=!0,s.classList.add("done")):(n.checked=!1,s.classList.remove("done")),i.dataset.btnDel="button-del-task col",a.dataset.taskId=o.toString(),a.append(n),a.append(s),a.append(i),r.append(a)}e.append(r),t.append(e)};var keyToDoListLocalStorage="todolist",tasksArr=prepareArrFromLocalStorage(keyToDoListLocalStorage),toDoList=new ToDoList(tasksArr),parentListContainer="[data-list-container]",parentContainer=(toDoList.printAtHtml(parentListContainer),document.querySelector("[data-todo-container]"));parentContainer.addEventListener("click",function(t){var e,r;"BUTTON"===t.target.tagName&&(t.target.dataset.btnAdd&&(r=t.target.parentNode.querySelector("#title").value)&&(r=new Task({title:r,description:t.target.parentNode.querySelector("#description").value}),toDoList.addTask(r),localStorage.setItem(keyToDoListLocalStorage,JSON.stringify(toDoList)),toDoList.printAtHtml(parentListContainer)),t.target.dataset.btnDel)&&(r=t.target.parentNode.dataset.taskId,toDoList.deleteTask(r),localStorage.setItem(keyToDoListLocalStorage,JSON.stringify(toDoList)),toDoList.printAtHtml(parentListContainer)),"checkbox"===t.target.type&&(r=t.target.parentNode.dataset.taskId,e=t.target.parentElement.querySelectorAll(".task-text"),t.target.checked&&(e.forEach(function(t){return t.classList.add("done")}),toDoList.tasks[r].state="true"),t.target.checked||(e.forEach(function(t){return t.classList.remove("done")}),toDoList.tasks[r].state="false"),localStorage.setItem(keyToDoListLocalStorage,JSON.stringify(toDoList))),"task-text col-6"!==t.target.className&&"task-text col-6 done"!==t.target.className||(e=document.querySelector(".modal-title"),r=document.querySelector(".modal-body"),t=t.target.parentNode.dataset.taskId,e.textContent=toDoList.tasks[t].title,r.textContent=toDoList.tasks[t].description)}),window.addEventListener("storage",function(){toDoList.tasks=prepareArrFromLocalStorage(keyToDoListLocalStorage),toDoList.printAtHtml(parentListContainer)});